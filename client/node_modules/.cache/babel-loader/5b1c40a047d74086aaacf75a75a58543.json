{"ast":null,"code":"import _toConsumableArray from\"/Users/abe/Documents/00 Berkeley Bootcamp/mern-trivia/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/abe/Documents/00 Berkeley Bootcamp/mern-trivia/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/abe/Documents/00 Berkeley Bootcamp/mern-trivia/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var decodeHTML=function decodeHTML(html){var txt=document.createElement('textarea');txt.innerHTML=html;return txt.value;};function Question(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),questions=_useState2[0],setQuestions=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),answerSelected=_useState4[0],setAnswerSelected=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedAnswer=_useState6[0],setSelectedAnswer=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),options=_useState8[0],setOptions=_useState8[1];var score=useSelector(function(state){return state.score;});var encodedQuestions=useSelector(function(state){return state.questions;});useEffect(function(){var decodedQuestions=encodedQuestions.map(function(q){return _objectSpread(_objectSpread({},q),{},{question:decodeHTML(q.question),correct_answer:decodeHTML(q.correct_answer),incorrect_answers:q.incorrect_answers.map(function(a){return decodeHTML(a);})});});setQuestions(decodedQuestions);},[encodedQuestions]);var questionIndex=useSelector(function(state){return state.index;});var dispatch=useDispatch();var question=questions[questionIndex];var answer=question&&question.correct_answer;var getRandomInt=function getRandomInt(max){return Math.floor(Math.random()*Math.floor(max));};useEffect(function(){if(questionIndex>=10){navigate('/final');}if(!question){return;}var answers=_toConsumableArray(question.incorrect_answers);answers.splice(getRandomInt(question.incorrect_answers.length),0,question.correct_answer);setOptions(answers);},[question]);var handleListItemClick=function handleListItemClick(event){setAnswerSelected(true);setSelectedAnswer(event.target.textContent);if(event.target.textContent===answer){dispatch({type:'SET_SCORE',score:score+1});}if(questionIndex+1<=questions.length){setTimeout(function(){setAnswerSelected(false);setSelectedAnswer(null);dispatch({type:'SET_INDEX',index:questionIndex+1});},2500);}};var getClass=function getClass(option){if(!answerSelected){return\"\";}if(option===answer){return\"correct disabled\";}if(option===selectedAnswer){return\"selected disabled\";}else{return\"disabled\";}};if(!question){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Question \",questionIndex+1]}),/*#__PURE__*/_jsx(\"h3\",{children:question.question}),/*#__PURE__*/_jsx(\"ul\",{children:options.map(function(option,i){return/*#__PURE__*/_jsx(\"li\",{onClick:handleListItemClick,className:getClass(option),children:option},i);})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Score: \",score,\" / \",questions.length]})]});}export default Question;","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","useNavigate","decodeHTML","html","txt","document","createElement","innerHTML","value","Question","navigate","questions","setQuestions","answerSelected","setAnswerSelected","selectedAnswer","setSelectedAnswer","options","setOptions","score","state","encodedQuestions","decodedQuestions","map","q","question","correct_answer","incorrect_answers","a","questionIndex","index","dispatch","answer","getRandomInt","max","Math","floor","random","answers","splice","length","handleListItemClick","event","target","textContent","type","setTimeout","getClass","option","i"],"sources":["/Users/abe/Documents/00 Berkeley Bootcamp/mern-trivia/client/src/components/Question.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useNavigate } from 'react-router-dom'\n\nconst decodeHTML = function (html) {\n  const txt = document.createElement('textarea')\n  txt.innerHTML = html\n  return txt.value\n}\nfunction Question() {\n  const navigate = useNavigate();\n  const [questions, setQuestions] = useState([])\n  const [answerSelected, setAnswerSelected] = useState(false)\n  const [selectedAnswer, setSelectedAnswer] = useState(null)\n  const [options, setOptions] = useState([])\n  const score = useSelector((state) => state.score)\n  const encodedQuestions = useSelector((state) => state.questions)\n  \n  useEffect(() => {\n    const decodedQuestions = encodedQuestions.map(q => {\n      return {\n        ...q,\n        question: decodeHTML(q.question),\n        correct_answer: decodeHTML(q.correct_answer),\n        incorrect_answers: q.incorrect_answers.map(a => decodeHTML(a))\n      }\n    })\n    setQuestions(decodedQuestions)\n  }, [encodedQuestions])\n  const questionIndex = useSelector((state) => state.index);\n  const dispatch = useDispatch()\n  const question = questions[questionIndex]\n  const answer = question && question.correct_answer\n  const getRandomInt = (max) => {\n    return Math.floor(Math.random() * Math.floor(max))\n  }\n  useEffect(() => {\n    if (questionIndex >= 10) {\n      navigate('/final');\n    }\n    if (!question) {\n      return;\n    }\n    let answers = [...question.incorrect_answers]\n    answers.splice(getRandomInt(question.incorrect_answers.length), 0, question.correct_answer)\n    setOptions(answers)\n  }, [question])\n  const handleListItemClick = (event) => {\n    setAnswerSelected(true)\n    setSelectedAnswer(event.target.textContent)\n    if (event.target.textContent === answer) {\n      dispatch({\n        type: 'SET_SCORE',\n        score: score + 1,\n      })\n    }\n    if (questionIndex + 1 <= questions.length) {\n      setTimeout(() => {\n        setAnswerSelected(false)\n        setSelectedAnswer(null)\n        dispatch({\n          type: 'SET_INDEX',\n          index: questionIndex + 1,\n        })\n      }, 2500)\n    }\n  }\n\n  const getClass = option => {\n    if (!answerSelected) {\n      return ``;\n    }\n    if (option === answer) {\n      return `correct disabled`;\n    }\n    if (option === selectedAnswer) {\n      return `selected disabled`;\n    } else {\n      return `disabled`;\n    }\n  }\n  if (!question) {\n    return <div>Loading</div>\n  }\n  return (\n    <div>\n      <p>Question {questionIndex + 1}</p>\n      <h3>{question.question}</h3>\n      <ul>\n        {options.map((option, i) => (\n          <li key={i} onClick={handleListItemClick} className={getClass(option)}>\n            {option}\n          </li>\n        ))}\n      </ul>\n      <div>\n        Score: {score} / {questions.length}\n      </div>\n    </div>\n  )\n}\n\nexport default Question"],"mappings":"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"},"metadata":{},"sourceType":"module"}